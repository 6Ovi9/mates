let post_id=0;let post_rating=0;let is_being_rated=!1;ratingsL10n.custom=parseInt(ratingsL10n.custom);ratingsL10n.max=parseInt(ratingsL10n.max);ratingsL10n.show_loading=parseInt(ratingsL10n.show_loading);ratingsL10n.show_fading=parseInt(ratingsL10n.show_fading);function current_rating(id,rating,rating_text){if(!is_being_rated){post_id=id;post_rating=rating;if(ratingsL10n.custom&&ratingsL10n.max==2){document.getElementById('rating_'+post_id+'_'+rating).setAttribute('src',eval('ratings_'+rating+'_mouseover_image.src'))}else{for(i=1;i<=rating;i++){if(ratingsL10n.custom){document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',eval('ratings_'+i+'_mouseover_image.src'))}else{document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratings_mouseover_image.src)}}}}}
function ratings_off(rating_score,insert_half,half_rtl){if(!is_being_rated){for(i=1;i<=ratingsL10n.max;i++){if(i<=rating_score){if(ratingsL10n.custom){document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_'+i+'_on.'+ratingsL10n.image_ext)}else{document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_on.'+ratingsL10n.image_ext)}}else if(i==insert_half){if(ratingsL10n.custom){document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_'+i+'_half'+(half_rtl?'-rtl':'')+'.'+ratingsL10n.image_ext)}else{document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_half'+(half_rtl?'-rtl':'')+'.'+ratingsL10n.image_ext)}}else{if(ratingsL10n.custom){document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_'+i+'_off.'+ratingsL10n.image_ext)}else{document.getElementById('rating_'+post_id+'_'+i).setAttribute('src',ratingsL10n.plugin_url+'/images/'+ratingsL10n.image+'/rating_off.'+ratingsL10n.image_ext)}}}}}
function set_is_being_rated(rated_status){is_being_rated=rated_status}
function rate_post_success(data){document.getElementById('post-ratings-'+post_id).innerHTML=data;if(ratingsL10n.show_loading){document.getElementById('post-ratings-'+post_id+'-loading').style.display='none'}
set_is_being_rated(!1)}
const rate_post=async function(){let post_ratings_el=document.getElementById('post-ratings-'+post_id);if(!is_being_rated){let post_ratings_nonce=post_ratings_el.getAttribute('data-nonce');set_is_being_rated(!0);if(ratingsL10n.show_loading){document.getElementById('post-ratings-'+post_id+'-loading').style.display=''}
let response=await fetch(ratingsL10n.ajax_url,{method:'POST',credentials:'same-origin',body:'action=postratings&pid='+post_id+'&rate='+post_rating+'&postratings_'+post_id+'_nonce='+post_ratings_nonce,cache:'no-cache',headers:new Headers({'Content-Type':'application/x-www-form-urlencoded'})});if(response.ok){let ratings=await response.text();rate_post_success(ratings);const ratings_wrapper=document.querySelector('.ratings-wrapper');ratings_wrapper.classList.add('ratings-wrapper-voted')}}else{alert(ratingsL10n.text_wait)}}